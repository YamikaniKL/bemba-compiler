# BembaJS v1.3.0 Roadmap
## Building on v1.2.0 "React Integration" Foundation

---

## ðŸŽ¯ **Vision for v1.3.0**

**Theme:** "Developer Experience & Performance"

Build on the solid React/Pisha foundation from v1.2.0 to create the best developer experience possible while adding essential Next.js-like features.

---

## âœ… **What We Have (v1.2.0)**

- âœ… React ecosystem integration
- âœ… Pisha build tool (Vite-based)
- âœ… Component wrappers (Shadcn, MUI)
- âœ… Import/export system
- âœ… Hot module replacement
- âœ… NPM package support

---

## ðŸš€ **Proposed Features for v1.3.0**

### **Priority 1: Enhance Pisha (Build Tool)**

#### 1.1 Better Hot Module Replacement âš¡
**Current:** Full page reload on .bemba file changes  
**Goal:** Component-level updates, preserve state

**Implementation:**
```javascript
// packages/pisha/src/plugin.js
handleHotUpdate({ file, server, modules }) {
  if (file.endsWith('.bemba')) {
    // Find affected components
    const affectedModules = modules.filter(m => 
      m.url.includes(file)
    );
    
    // Send targeted HMR update
    server.ws.send({
      type: 'update',
      updates: affectedModules.map(m => ({
        type: 'js-update',
        path: m.url,
        acceptedPath: m.url
      }))
    });
  }
}
```

**Benefits:**
- Faster development
- Better debugging experience
- State preservation

---

#### 1.2 Source Maps for .bemba Files ðŸ—ºï¸
**Goal:** Debug Bemba code directly in browser DevTools

**Implementation:**
- Generate source maps during compilation
- Map Bemba syntax to generated JSX
- Support in browser DevTools

---

#### 1.3 Build Analytics & Bundle Analysis ðŸ“Š
**Goal:** Help developers optimize their apps

**Features:**
- Bundle size reporting
- Dependency analysis
- Code splitting suggestions
- Performance metrics

**CLI Command:**
```bash
pisha analyze
# Shows:
# - Bundle sizes
# - Largest dependencies
# - Unused code
# - Optimization suggestions
```

---

### **Priority 2: More Component Wrappers**

#### 2.1 Chakra UI Wrapper ðŸŽ¨
**Why:** Popular, accessible, themeable

**Implementation:**
```javascript
// packages/bembajs/src/wrappers/chakra-wrapper.js
export function wrapChakraComponent(componentName, bembaProps) {
  const propMap = {
    pakuKlikisha: 'onClick',
    pakuLemba: 'onChange',
    imikalile: 'className',
    // ... Chakra-specific mappings
  };
  
  return mapProps(bembaProps, propMap);
}
```

**Components to support:**
- Button, Input, Box, Stack, Flex
- Modal, Drawer, Popover
- Form components

---

#### 2.2 Ant Design Wrapper ðŸœ
**Why:** Enterprise-grade, comprehensive

**Components to support:**
- Button, Input, Form, Table
- DatePicker, Select, Upload
- Layout components

---

#### 2.3 Radix UI Wrapper â™¿
**Why:** Unstyled, accessible primitives

**Components to support:**
- Dialog, Dropdown, Popover
- Accordion, Tabs, Tooltip
- All Radix primitives

---

### **Priority 3: Advanced Component Patterns**

#### 3.1 Compound Components ðŸ§©
**Goal:** Build complex, composable components

**Example:**
```bemba
// Tabs component with compound pattern
fyambaIcipanda('Tabs', {
    ifiputulwa: {
        TabsRoot: {
            defaultValue: 'tab1',
            ifika: [
                {
                    name: 'TabsList',
                    ifika: [
                        { name: 'TabsTrigger', value: 'tab1', ifika: 'Tab 1' },
                        { name: 'TabsTrigger', value: 'tab2', ifika: 'Tab 2' }
                    ]
                },
                {
                    name: 'TabsContent',
                    value: 'tab1',
                    ifika: 'Content 1'
                }
            ]
        }
    }
});
```

---

#### 3.2 Context Providers in Bemba ðŸŒ
**Goal:** Use React Context with Bemba syntax

**Example:**
```bemba
pangaContext('ThemeContext', {
    defaultValue: 'light',
    provider: 'ThemeProvider',
    hook: 'useTheme'
});

// Use in components
fyambaIcipanda('ThemedComponent', {
    ifiputulwa: {
        ukusunga: {
            theme: useTheme()
        }
    }
});
```

---

#### 3.3 Custom Hooks Support ðŸŽ£
**Goal:** Create and use custom hooks in Bemba

**Example:**
```bemba
pangaHook('useCounter', {
    initialState: 0,
    increment: 'ukuCinja("count", count + 1)',
    decrement: 'ukuCinja("count", count - 1)'
});

// Use in component
fyambaIcipanda('Counter', {
    ifiputulwa: {
        ukusunga: {
            count: useCounter(0)
        }
    }
});
```

---

### **Priority 4: Essential Next.js Features**

#### 4.1 Middleware Support ðŸ”
**Goal:** Handle auth, redirects, headers

**Example:**
```bemba
// mafungulo/middleware.bemba
pangaMiddleware({
    matcher: ['/dashboard/*', '/admin/*'],
    pakuKutanga: `
        if (!request.cookies.auth) {
            return redirect('/login');
        }
        
        if (request.path.startsWith('/admin') && !isAdmin()) {
            return redirect('/dashboard');
        }
        
        return next();
    `
});
```

---

#### 4.2 Image Optimization ðŸ–¼ï¸
**Goal:** Automatic image optimization

**Example:**
```bemba
fyambaIcipanda('MyPage', {
    ifiputulwa: {
        ifikopo: [
            {
                name: 'Image',
                props: {
                    src: '/logo.png',
                    width: 200,
                    height: 100,
                    alt: 'Logo',
                    loading: 'lazy',
                    priority: false
                }
            }
        ]
    }
});
```

**Features:**
- Automatic format conversion (WebP, AVIF)
- Responsive images
- Lazy loading
- Blur placeholder

---

#### 4.3 Enhanced API Routes ðŸ”Œ
**Goal:** More powerful API endpoints

**Features:**
- File upload handling
- Streaming responses
- Request/Response helpers
- Middleware for API routes

**Example:**
```bemba
pangaApi('upload', {
    method: 'POST',
    handler: `
        const formData = await request.formData();
        const file = formData.get('file');
        
        // Process file
        const result = await processFile(file);
        
        return Response.json({ 
            success: true, 
            url: result.url 
        });
    `
});
```

---

### **Priority 5: Developer Experience**

#### 5.1 Better Error Messages ðŸ’¬
**Goal:** Helpful, actionable error messages

**Improvements:**
- Show code snippets with errors
- Suggest fixes
- Link to documentation
- Bemba language error messages

**Example:**
```
âŒ Ifipushi: Component 'UserCard' ifipushi fya props

ðŸ“„ ifikopo/UserCard.bemba:5
   fyambaIcipanda('UserCard', {
      ificingilila: {
          izina: { type: 'string', required: true }
      }
   });

ðŸ’¡ Suggestion: UserCard requires 'izina' prop but it was not provided.
   Check: amapeji/index.bemba:12
```

---

#### 5.2 Testing Support ðŸ§ª
**Goal:** Test Bemba components easily

**Features:**
- Testing utilities for Bemba components
- Test helpers
- Example test files

**Example:**
```javascript
// UserCard.test.js
import { renderBembaComponent } from 'bembajs/testing';
import { screen } from '@testing-library/react';

test('renders UserCard', () => {
  renderBembaComponent('UserCard', {
    izina: 'John',
    umaka: 25
  });
  
  expect(screen.getByText('John')).toBeInTheDocument();
});
```

---

#### 5.3 TypeScript Definitions ðŸ“˜
**Goal:** Full TypeScript support

**Features:**
- Type definitions for all Bemba keywords
- Component prop types
- Auto-completion in IDEs
- Type checking for .bemba files

---

## ðŸ“‹ **Implementation Plan**

### **Phase 1: Pisha Enhancements (Week 1-2)**
- [ ] Better HMR (component-level)
- [ ] Source maps
- [ ] Build analytics

### **Phase 2: More Wrappers (Week 2-3)**
- [ ] Chakra UI wrapper
- [ ] Ant Design wrapper
- [ ] Radix UI wrapper

### **Phase 3: Advanced Patterns (Week 3-4)**
- [ ] Compound components
- [ ] Context providers
- [ ] Custom hooks

### **Phase 4: Next.js Features (Week 4-5)**
- [ ] Middleware
- [ ] Image optimization
- [ ] Enhanced API routes

### **Phase 5: Developer Experience (Week 5-6)**
- [ ] Better error messages
- [ ] Testing support
- [ ] TypeScript definitions

---

## ðŸŽ¯ **Success Metrics**

- **HMR Performance:** < 100ms update time
- **Bundle Size:** < 5% increase from v1.2.0
- **Wrapper Coverage:** 5+ UI libraries supported
- **Developer Satisfaction:** Positive feedback on DX improvements

---

## ðŸš€ **Quick Wins (Can Do Today)**

1. **Add Chakra UI wrapper** (2-3 hours)
   - Copy MUI wrapper pattern
   - Map Chakra props
   - Test with examples

2. **Improve error messages** (1-2 hours)
   - Add code snippets
   - Add suggestions
   - Better formatting

3. **Add build analytics** (2-3 hours)
   - Use Vite's bundle analyzer
   - Add CLI command
   - Show results

---

## ðŸ“ **Notes**

- Build incrementally on v1.2.0
- Focus on developer experience
- Maintain backward compatibility
- Get user feedback early
- Document everything

---

**Target Release:** v1.3.0 "Developer Experience"  
**Timeline:** 6-8 weeks  
**Focus:** Enhance what works, add essential features

